<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">

<title layout:fragment="title">myParty | Party Created!</title>

<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<section layout:fragment="content">

    <a href="/profile">Back to Profile</a>

    <h1>SUCCESS!</h1>
    <h2 th:text="${party.title} + ' has been successfully created!'"></h2>

    <h3>Now let's invite people!</h3>

        <!--TODO: Need to change the above back to POST method, send back to profile and add a controller
                    once email functionality is completed to send emails too-->

        <label for="customUrl">Custom Party Url:</label>
        <input type="text" id="customUrl" th:value="'http://localhost:8080/rsvp/' + ${party.urlKey}"/>

<!--        <label for="emailAddress">Email Addresses</label>-->
        <form th:action="@{|/parties/${party.urlKey}|}" th:method="post">
            <div id="emails">
                <div class="form-group">
                    <label for="email[]">Email Address:</label>
                    <input type="email" name="email[]" id="email[]">
                </div>
            </div>
            <button id="addEmailButton">Add Another Email</button>
            <input type="submit" class="btn btn-info" value="Send Invites!">
        </form>

    <script>
        window.onload = (function() {
            const additionalEmail = document.getElementById('addEmailButton');

            const emailForm = `<div class="form-group">
                  <label for="email[]">Email Address:</label>
                  <input type="email" name="email[]" id="email[]">

                </div>`

            additionalEmail.addEventListener('click', function(event) {
                event.preventDefault();

                const yeahBaby = document.getElementById('additionalEmails');
                let newEmail = document.createElement("div");
                newEmail.innerHTML = emailForm;
                yeahBaby.appendChild(newEmail);
            });
        })
    </script>

</section>

<footer><p layout:fragment="custom-footer">This is actually working</p></footer>

</html>